

#include <stdio.h>
#include <Windows.h>

#if 0
#define DONT_CARE_ABOUT_SMALL
#endif

BYTE const sprites[] = {
	0x00, 0x00, 0x0C, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x30,
	0x18, 0x00, 0x08, 0x00, 0x04, 0x00, 0x00, 0x20, 0x00, 0x10, 0x00, 0x0A,
	0x00, 0x04, 0x00, 0x00, 0x04, 0x00, 0x08, 0x00, 0x08, 0x00, 0x00, 0x20,
	0x00, 0x18, 0x00, 0x00, 0x30, 0x00, 0x10, 0x00, 0x0C, 0x40, 0x00, 0x20,
	0x00, 0x10, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00,
	0x04, 0x00, 0x04, 0x00, 0x00, 0x20, 0x00, 0x10, 0x00, 0x00, 0x02, 0x80,
	0x1C, 0x40, 0x10, 0x40, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00,
	0x01, 0x80, 0x01, 0x80, 0x02, 0x80, 0x02, 0xC0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x01, 0x40, 0x02, 0x20, 0x0C, 0xC0, 0x08, 0x80, 0x00, 0x00,
	0x00, 0x00, 0x04, 0x00, 0x08, 0x00, 0x04, 0x00, 0x00, 0x20, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x04, 0x20, 0x08, 0x10, 0x10, 0x18, 0x08, 0x00,
	0x00, 0x00, 0x04, 0x00, 0x08, 0x10, 0x08, 0x10, 0x00, 0x20, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x30, 0x38, 0x08, 0x20, 0x04,
	0x00, 0x00, 0x04, 0x00, 0x08, 0x08, 0x10, 0x10, 0x00, 0x20, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xF8, 0x20, 0x04,
	0x00,
};

DWORD i, j, k, l, spritecur;
/*#define i rect.Top
#define j rect.Right
#define k rect.Bottom
DWORD spritecur;*/
DWORD const backcolor = 0x80,
#ifdef DONT_CARE_ABOUT_SMALL
off = 0,
#endif
color = 0x009DBEE0;

HANDLE CON;
COORD cursor = { 0, 0 }, size = { 24, 20 };
SMALL_RECT rect = { 0, 0, 24 - 1, 20 - 1 };
#ifdef DONT_CARE_ABOUT_SMALL
CONSOLE_CURSOR_INFO conCur;
#endif

int draw(WORD color, WORD length)
{
	return FillConsoleOutputAttribute(CON, color, length, cursor, &rect.Left);
}

int main()
{
	CON = GetStdHandle(STD_OUTPUT_HANDLE);
	#ifdef DONT_CARE_ABOUT_SMALL
	{
		SetConsoleTitle("DEMO_0000");
		
		GetConsoleCursorInfo(CON, &conCur);
		conCur.bVisible = 0;
		SetConsoleCursorInfo(CON, &conCur);
	}
	#endif
	#ifdef DONT_CARE_ABOUT_SMALL
	if(CON)
		if(SetConsoleWindowInfo(CON,1,&rect))
			if(SetConsoleScreenBufferSize(CON, size))
	#else
	SetConsoleWindowInfo(CON,1,&rect);
	SetConsoleScreenBufferSize(CON, size);
	#endif
				draw(backcolor, 24*20);
			//else
				//system("MODE CON: COLS=24 LINES=20");
	// Main body
	cursor.X =
#ifdef DONT_CARE_ABOUT_SMALL
	off+
#endif
	10;
	cursor.Y = 2;
	while (cursor.Y < 14)
	{
		draw(0, 4);
		cursor.Y++;
	}
	while (1)
	{
		// Rainbow
		cursor.X = 0;
		cursor.Y = 2;
		while (i < 5)
		{
			while (j < 3 + (i==3))
			{
				draw((color >> ((i)*4)), 
					#ifdef DONT_CARE_ABOUT_SMALL
						off+
					#endif
					10);
				cursor.Y++;
				j++;
			}
			j = 0;
			i++;
		}
		i = 0;
		// Vision
		cursor.X = 
#ifdef DONT_CARE_ABOUT_SMALL
	off+
#endif
		12;
		cursor.Y = 3;
		draw(0xF0, 2);
		// Erase previous dots
		cursor.X += 2;
		cursor.Y += 3;
		while (cursor.Y < 14)
		{
			draw(backcolor, 5);
			cursor.Y++;
		}
		cursor.X -= 4;
		cursor.Y = 14;
		while (cursor.Y < 18)
		{
			draw(backcolor, 9);
			cursor.Y++;
		}
		// Draw frame dots
		cursor.X -= 6;
		cursor.Y = 5;
		while (i < 13)
		{
			while (j < 2)
			{
				while (k < 8)
				{
					if (((sprites[(i*2)+j+(spritecur*(26))] << k) & 0x80))
					{
						draw(0x00, 1);
					}
					k++;
					cursor.X++;
				}
				k = 0;
				j++;
			}
			cursor.Y++;
			cursor.X -= 16;
			j = 0;
			i++;
		}
		i = 0;
		if(spritecur<7)
			spritecur++;
		else
			spritecur = 0;
		Sleep(28);
	}
}

